name: CodeQL Security Analysisname: CodeQL Security Analysis



on:on:

  push:  push:

    branches: [ "master" ]    branches: [ "master" ]

  pull_request:  pull_request:

    branches: [ "master" ]    branches: [ "master" ]

  schedule:  schedule:

    - cron: '0 2 * * 1'  # Weekly Monday 02:00 UTC    - cron: '0 2 * * 1'  # Weekly Monday 02:00 UTC



permissions:permissions:

  contents: read  contents: read

  security-events: write  security-events: write

  actions: read  actions: read



jobs:jobs:

  analyze:  analyze:

    name: Analyze (Java)    name: Analyze (Java)

    runs-on: ubuntu-latest    runs-on: ubuntu-latest

    timeout-minutes: 90    timeout-minutes: 90

    # Only upload results when pushing to master, not on pull requests    steps:

    if: github.event_name != 'pull_request'      - name: Checkout repository

    steps:        uses: actions/checkout@v4

      - name: Checkout repository

        uses: actions/checkout@v4      - name: Setup Java

        uses: actions/setup-java@v5

      - name: Setup Java        with:

        uses: actions/setup-java@v5          distribution: temurin

        with:          java-version: '11'

          distribution: temurin

          java-version: '11'      - name: Initialize CodeQL

        uses: github/codeql-action/init@v4

      - name: Initialize CodeQL        with:

        uses: github/codeql-action/init@v4          languages: java

        with:          queries: security-extended,security-and-quality

          languages: java-kotlin

          queries: security-extended,security-and-quality      # Manual build ensures full dependency resolution and covers multi-module changes.

    #  - name: Build with Maven (no tests)

      # Manual build ensures full dependency resolution and covers multi-module changes.    #    run: mvn -B -q clean install -DskipTests

      - name: Build with Maven (no tests)

        run: mvn -B -q clean install -DskipTests    #  - name: Perform CodeQL Analysis

    #    uses: github/codeql-action/analyze@v3

      - name: Perform CodeQL Analysis    #    with:

        uses: github/codeql-action/analyze@v4    #      category: "/language:java"

        with:    #     upload: true

          category: "/language:java-kotlin"

          upload: true    # Optional: fail the job if any results exceed a threshold (future enhancement via SARIF parsing)
