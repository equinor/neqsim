<!-- KaTeX for beautiful math equation rendering -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Ber5DwbvePvL6dK6RkTrR5mT68u7+BTxf+HK9gLy" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body, {
      delimiters: [
        {left: '$$', right: '$$', display: true},
        {left: '$', right: '$', display: false},
        {left: '\\\\[', right: '\\\\]', display: true},
        {left: '\\\\(', right: '\\\\)', display: false}
      ],
      throwOnError: false,
      trust: true,
      strict: false
    });"></script>

<!-- Custom NeqSim styles -->
<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">

<style>
/* Math equation styling improvements */
.katex-display {
  margin: 1.5em 0;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 0.5em 0;
}

.katex {
  font-size: 1.1em;
}

/* Better equation centering */
.katex-display > .katex {
  max-width: 100%;
  text-align: center;
}

/* Equation number styling (if needed) */
.katex-display .katex-html {
  display: flex;
  justify-content: center;
}

/* Responsive math for mobile */
@media (max-width: 768px) {
  .katex-display {
    font-size: 0.9em;
  }
  
  .katex-display > .katex {
    max-width: 100%;
    overflow-x: auto;
  }
}

/* Inline math spacing */
.katex:not(.katex-display) {
  padding: 0 0.1em;
}

/* Dark mode support for equations (if using dark mode) */
@media (prefers-color-scheme: dark) {
  .katex {
    color: #e0e0e0;
  }
}
</style>
