digraph ProcessFlowDiagram {
  // Generated by NeqSim ProcessDiagramExporter
  // Process Flow Diagram

  // Graph attributes - Industry PFD conventions
  // Left-to-right flow with vertical phase stratification
  graph [
    rankdir=LR
    splines=ortho
    nodesep=0.8
    ranksep=1.2
    fontname="Arial"
    fontsize=12
    label="Process Flow Diagram"
    labelloc=t
    labeljust=c
    bgcolor=white
    pad=0.5
    newrank=true
    ordering=out
  ];

  // Default node attributes
  node [
    fontname="Arial"
    fontsize=10
  ];

  // Default edge attributes
  edge [
    fontname="Arial"
    fontsize=8
    arrowsize=0.7
  ];

  // Industry PFD layout: left-to-right flow with vertical phase zones

  // Feed streams/equipment (left side)
  { rank=min; "Well Stream"; }
  // Product/Export streams (right side)
  { rank=max; "2nd Stage Aftercooler"; "Export Gas"; "HP Water Pump"; "HP Water Disposal"; "MP Gas Vent"; "MP Water Pump"; "MP Water Disposal"; "LP Gas Vent"; "Oil Export Pump"; "Oil Export Cooler"; "Export Oil"; "LP Water Pump"; "LP Water Disposal"; }

  // Invisible edges to enforce left-to-right ordering
  "Well Stream" -> "HP 3-Phase Separator" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "2nd Stage Aftercooler" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "Export Gas" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "HP Water Pump" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "HP Water Disposal" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "MP Gas Vent" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "MP Water Pump" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "MP Water Disposal" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "LP Gas Vent" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "Oil Export Pump" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "Oil Export Cooler" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "Export Oil" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "LP Water Pump" [style=invis, weight=0];
  "HP 3-Phase Separator" -> "LP Water Disposal" [style=invis, weight=0];

  // Vertical phase zone ordering (Gas top → Oil middle → Water bottom)
  "HP Water Pump" -> "HP 3-Phase Separator" [style=invis, constraint=true, minlen=1];
  "HP 3-Phase Separator" -> "HP Gas Cooler" [style=invis, constraint=true, minlen=1];
  "HP Water Pump" -> "HP Gas Cooler" [style=invis, constraint=true, minlen=2];

  // Phase zone clusters - ordered top to bottom: Gas, Oil, Water
  subgraph cluster_gas {
    label="Gas Processing"
    style=dashed
    color="#87CEEB"
    bgcolor="#F0F8FF"
    "_gas_anchor" [style=invis, width=0, height=0, label=""];
    "HP Gas Cooler";
    "1st Stage Compressor";
    "1st Stage Aftercooler";
    "2nd Stage Compressor";
    "2nd Stage Aftercooler";
    "Export Gas";
    "MP Gas Vent";
    "LP Gas Vent";
  }

  subgraph cluster_oil {
    label="Oil Processing"
    style=dashed
    color="#8B4513"
    bgcolor="#FAEBD7"
    "_oil_anchor" [style=invis, width=0, height=0, label=""];
    "HP 3-Phase Separator";
    "HP-MP Valve";
    "MP 3-Phase Separator";
    "MP-LP Valve";
    "LP 3-Phase Separator";
    "Oil Export Pump";
    "Oil Export Cooler";
    "Export Oil";
  }

  subgraph cluster_separation {
    label="Separation"
    style=dashed
    color="#FFD700"
    bgcolor="#FFFACD"
    "_sep_anchor" [style=invis, width=0, height=0, label=""];
    "Inlet Heater";
  }

  subgraph cluster_water {
    label="Water Processing"
    style=dashed
    color="#1E90FF"
    bgcolor="#F0F8FF"
    "_water_anchor" [style=invis, width=0, height=0, label=""];
    "HP Water Pump";
    "HP Water Disposal";
    "MP Water Pump";
    "MP Water Disposal";
    "LP Water Pump";
    "LP Water Disposal";
  }

  // Force vertical cluster ordering (gas top, water bottom)
  "_water_anchor" -> "_sep_anchor" [style=invis, constraint=true, weight=1000];
  "_sep_anchor" -> "_oil_anchor" [style=invis, constraint=true, weight=1000];
  "_oil_anchor" -> "_gas_anchor" [style=invis, constraint=true, weight=1000];

  // Equipment Nodes
  "Well Stream" [label="Well Stream", shape=ellipse, style="filled", fillcolor="#FFFFFF", color="#000000", fontcolor="black", fontname="Arial", fontsize=10, width=1.2, height=0.5];
  "Inlet Heater" [
    label=<
      <TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="4" BGCOLOR="#FF6347" COLOR="#8B0000">
        <TR>
          <TD WIDTH="70" HEIGHT="35" ALIGN="CENTER">
            <FONT POINT-SIZE="9" COLOR="white">Inlet Heater</FONT><BR/>
            <FONT POINT-SIZE="7" COLOR="white">Heater</FONT>
          </TD>
        </TR>
      </TABLE>
    >,
    shape=plaintext
  ];
  "HP 3-Phase Separator" [label="HP 3-Phase Separator", shape=cylinder, style="filled", fillcolor="#98FB98", color="#228B22", fontcolor="black", fontname="Arial", fontsize=10, width=1.4, height=1.8];
  "HP Gas Cooler" [
    label=<
      <TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="4" BGCOLOR="#87CEEB" COLOR="#4682B4">
        <TR>
          <TD WIDTH="70" HEIGHT="35" ALIGN="CENTER">
            <FONT POINT-SIZE="9" COLOR="black">HP Gas Cooler</FONT><BR/>
            <FONT POINT-SIZE="7" COLOR="black">Cooler</FONT>
          </TD>
        </TR>
      </TABLE>
    >,
    shape=plaintext
  ];
  "1st Stage Compressor" [label="1st Stage Compressor", shape=parallelogram, style="filled", fillcolor="#87CEEB", color="#4682B4", fontcolor="black", fontname="Arial", fontsize=10, width=1.5, height=0.8];
  "1st Stage Aftercooler" [
    label=<
      <TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="4" BGCOLOR="#87CEEB" COLOR="#4682B4">
        <TR>
          <TD WIDTH="70" HEIGHT="35" ALIGN="CENTER">
            <FONT POINT-SIZE="9" COLOR="black">1st Stage Aftercooler</FONT><BR/>
            <FONT POINT-SIZE="7" COLOR="black">Cooler</FONT>
          </TD>
        </TR>
      </TABLE>
    >,
    shape=plaintext
  ];
  "2nd Stage Compressor" [label="2nd Stage Compressor", shape=parallelogram, style="filled", fillcolor="#87CEEB", color="#4682B4", fontcolor="black", fontname="Arial", fontsize=10, width=1.5, height=0.8];
  "2nd Stage Aftercooler" [
    label=<
      <TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="4" BGCOLOR="#87CEEB" COLOR="#4682B4">
        <TR>
          <TD WIDTH="70" HEIGHT="35" ALIGN="CENTER">
            <FONT POINT-SIZE="9" COLOR="black">2nd Stage Aftercooler</FONT><BR/>
            <FONT POINT-SIZE="7" COLOR="black">Cooler</FONT>
          </TD>
        </TR>
      </TABLE>
    >,
    shape=plaintext
  ];
  "Export Gas" [label="Export Gas", shape=ellipse, style="filled", fillcolor="#FFFFFF", color="#000000", fontcolor="black", fontname="Arial", fontsize=10, width=1.2, height=0.5];
  "HP-MP Valve" [label="HP-MP Valve", shape=polygon, style="filled", fillcolor="#FFB6C1", color="#FF69B4", fontcolor="black", fontname="Arial", fontsize=10, width=0.3, height=0.25, sides=4, skew=0.6, orientation=0];
  "HP Water Pump" [
    label=<
      <TABLE BORDER="0" CELLBORDER="0" CELLSPACING="0">
        <TR><TD>
          <TABLE BORDER="2" CELLBORDER="0" CELLSPACING="0" CELLPADDING="8" BGCOLOR="#4169E1" COLOR="#00008B" STYLE="ROUNDED">
            <TR><TD ALIGN="CENTER">
              <FONT POINT-SIZE="14" COLOR="white">&#9654;</FONT>
            </TD></TR>
          </TABLE>
        </TD></TR>
        <TR><TD ALIGN="CENTER">
          <FONT POINT-SIZE="8">HP Water Pump</FONT>
        </TD></TR>
      </TABLE>
    >,
    shape=plaintext
  ];
  "HP Water Disposal" [label="HP Water Disposal", shape=ellipse, style="filled", fillcolor="#FFFFFF", color="#000000", fontcolor="black", fontname="Arial", fontsize=10, width=1.2, height=0.5];
  "MP 3-Phase Separator" [label="MP 3-Phase Separator", shape=cylinder, style="filled", fillcolor="#98FB98", color="#228B22", fontcolor="black", fontname="Arial", fontsize=10, width=1.4, height=1.8];
  "MP Gas Vent" [label="MP Gas Vent", shape=ellipse, style="filled", fillcolor="#FFFFFF", color="#000000", fontcolor="black", fontname="Arial", fontsize=10, width=1.2, height=0.5];
  "MP-LP Valve" [label="MP-LP Valve", shape=polygon, style="filled", fillcolor="#FFB6C1", color="#FF69B4", fontcolor="black", fontname="Arial", fontsize=10, width=0.3, height=0.25, sides=4, skew=0.6, orientation=0];
  "MP Water Pump" [
    label=<
      <TABLE BORDER="0" CELLBORDER="0" CELLSPACING="0">
        <TR><TD>
          <TABLE BORDER="2" CELLBORDER="0" CELLSPACING="0" CELLPADDING="8" BGCOLOR="#4169E1" COLOR="#00008B" STYLE="ROUNDED">
            <TR><TD ALIGN="CENTER">
              <FONT POINT-SIZE="14" COLOR="white">&#9654;</FONT>
            </TD></TR>
          </TABLE>
        </TD></TR>
        <TR><TD ALIGN="CENTER">
          <FONT POINT-SIZE="8">MP Water Pump</FONT>
        </TD></TR>
      </TABLE>
    >,
    shape=plaintext
  ];
  "MP Water Disposal" [label="MP Water Disposal", shape=ellipse, style="filled", fillcolor="#FFFFFF", color="#000000", fontcolor="black", fontname="Arial", fontsize=10, width=1.2, height=0.5];
  "LP 3-Phase Separator" [label="LP 3-Phase Separator", shape=cylinder, style="filled", fillcolor="#98FB98", color="#228B22", fontcolor="black", fontname="Arial", fontsize=10, width=1.4, height=1.8];
  "LP Gas Vent" [label="LP Gas Vent", shape=ellipse, style="filled", fillcolor="#FFFFFF", color="#000000", fontcolor="black", fontname="Arial", fontsize=10, width=1.2, height=0.5];
  "Oil Export Pump" [
    label=<
      <TABLE BORDER="0" CELLBORDER="0" CELLSPACING="0">
        <TR><TD>
          <TABLE BORDER="2" CELLBORDER="0" CELLSPACING="0" CELLPADDING="8" BGCOLOR="#4169E1" COLOR="#00008B" STYLE="ROUNDED">
            <TR><TD ALIGN="CENTER">
              <FONT POINT-SIZE="14" COLOR="white">&#9654;</FONT>
            </TD></TR>
          </TABLE>
        </TD></TR>
        <TR><TD ALIGN="CENTER">
          <FONT POINT-SIZE="8">Oil Export Pump</FONT>
        </TD></TR>
      </TABLE>
    >,
    shape=plaintext
  ];
  "Oil Export Cooler" [
    label=<
      <TABLE BORDER="1" CELLBORDER="0" CELLSPACING="0" CELLPADDING="4" BGCOLOR="#87CEEB" COLOR="#4682B4">
        <TR>
          <TD WIDTH="70" HEIGHT="35" ALIGN="CENTER">
            <FONT POINT-SIZE="9" COLOR="black">Oil Export Cooler</FONT><BR/>
            <FONT POINT-SIZE="7" COLOR="black">Cooler</FONT>
          </TD>
        </TR>
      </TABLE>
    >,
    shape=plaintext
  ];
  "Export Oil" [label="Export Oil", shape=ellipse, style="filled", fillcolor="#FFFFFF", color="#000000", fontcolor="black", fontname="Arial", fontsize=10, width=1.2, height=0.5];
  "LP Water Pump" [
    label=<
      <TABLE BORDER="0" CELLBORDER="0" CELLSPACING="0">
        <TR><TD>
          <TABLE BORDER="2" CELLBORDER="0" CELLSPACING="0" CELLPADDING="8" BGCOLOR="#4169E1" COLOR="#00008B" STYLE="ROUNDED">
            <TR><TD ALIGN="CENTER">
              <FONT POINT-SIZE="14" COLOR="white">&#9654;</FONT>
            </TD></TR>
          </TABLE>
        </TD></TR>
        <TR><TD ALIGN="CENTER">
          <FONT POINT-SIZE="8">LP Water Pump</FONT>
        </TD></TR>
      </TABLE>
    >,
    shape=plaintext
  ];
  "LP Water Disposal" [label="LP Water Disposal", shape=ellipse, style="filled", fillcolor="#FFFFFF", color="#000000", fontcolor="black", fontname="Arial", fontsize=10, width=1.2, height=0.5];

  // Stream Connections
  "Well Stream" -> "Inlet Heater" [color="#FFD700", style=bold, penwidth=2, label="Well Stream\\n65,0°C, 50,0 bar\\n150000 kg/hr"];
  "Inlet Heater" -> "HP 3-Phase Separator" [color="#FFD700", style=bold, penwidth=2, label="outStream\\n70,0°C, 50,0 bar\\n150000 kg/hr"];
  "HP 3-Phase Separator" -> "HP Gas Cooler" [color="#87CEEB", style=dashed, label="gasOutStream\\n70,0°C, 50,0 bar\\n84722 kg/hr", tailport=n, headport=s];
  "HP Gas Cooler" -> "1st Stage Compressor" [color="#FFD700", style=bold, penwidth=2, label="outStream\\n40,0°C, 50,0 bar\\n84722 kg/hr"];
  "1st Stage Compressor" -> "1st Stage Aftercooler" [color="#FFD700", style=bold, penwidth=2, label="outStream\\n70,2°C, 80,0 bar\\n84722 kg/hr"];
  "1st Stage Aftercooler" -> "2nd Stage Compressor" [color="#FFD700", style=bold, penwidth=2, label="outStream\\n40,0°C, 80,0 bar\\n84722 kg/hr"];
  "2nd Stage Compressor" -> "2nd Stage Aftercooler" [color="#FFD700", style=bold, penwidth=2, label="outStream\\n67,5°C, 120,0 bar\\n84722 kg/hr"];
  "HP 3-Phase Separator" -> "HP-MP Valve" [color="#8B4513", label="liquidOutStream\\n70,0°C, 50,0 bar\\n64055 kg/hr", tailport=e, headport=w];
  "HP 3-Phase Separator" -> "HP Water Pump" [color="#1E90FF", label="waterOutStream\\n70,0°C, 50,0 bar\\n1224 kg/hr", tailport=s, headport=n];
  "HP-MP Valve" -> "MP 3-Phase Separator" [color="#FFD700", style=bold, penwidth=2, label="HP-MP Valve out stream\\n64,1°C, 15,0 bar\\n64055 kg/hr"];
  "MP 3-Phase Separator" -> "MP-LP Valve" [color="#8B4513", label="liquidOutStream\\n64,1°C, 15,0 bar\\n59209 kg/hr", tailport=e, headport=w];
  "MP 3-Phase Separator" -> "MP Water Pump" [color="#1E90FF", label="waterOutStream\\n64,1°C, 15,0 bar\\n0 kg/hr", tailport=s, headport=n];
  "MP-LP Valve" -> "LP 3-Phase Separator" [color="#FFD700", style=bold, penwidth=2, label="MP-LP Valve out stream\\n51,0°C, 2,0 bar\\n59209 kg/hr"];
  "LP 3-Phase Separator" -> "Oil Export Pump" [color="#8B4513", label="liquidOutStream\\n51,0°C, 2,0 bar\\n53360 kg/hr", tailport=e, headport=w];
  "Oil Export Pump" -> "Oil Export Cooler" [color="#8B4513", label="Oil Export Pump out stream\\n51,3°C, 10,0 bar\\n53360 kg/hr"];
  "LP 3-Phase Separator" -> "LP Water Pump" [color="#1E90FF", label="waterOutStream\\n51,0°C, 2,0 bar\\n0 kg/hr", tailport=s, headport=n];

  // Legend
  subgraph cluster_legend {
    label="Legend"
    style=rounded
    color=gray
    fontsize=10
    
    legend_gas [label="Gas Stream" shape=plaintext];
    legend_gas_line [label="" shape=point width=0];
    legend_gas -> legend_gas_line [style=dashed, color="#87CEEB", arrowhead=none];
    
    legend_oil [label="Oil Stream" shape=plaintext];
    legend_oil_line [label="" shape=point width=0];
    legend_oil -> legend_oil_line [style=solid, color="#8B4513", arrowhead=none];
    
    legend_liquid [label="Liquid Stream" shape=plaintext];
    legend_liquid_line [label="" shape=point width=0];
    legend_liquid -> legend_liquid_line [style=solid, color="#4169E1", arrowhead=none];
    
    legend_water [label="Water Stream" shape=plaintext];
    legend_water_line [label="" shape=point width=0];
    legend_water -> legend_water_line [style=solid, color="#00CED1", arrowhead=none];
    
    legend_mixed [label="Mixed Stream" shape=plaintext];
    legend_mixed_line [label="" shape=point width=0];
    legend_mixed -> legend_mixed_line [style=bold, color="#FFD700", penwidth=2, arrowhead=none];
    
    legend_recycle [label="Recycle Stream" shape=plaintext];
    legend_recycle_line [label="" shape=point width=0];
    legend_recycle -> legend_recycle_line [style="dashed,bold", color="#9932CC", penwidth=2, arrowhead=none];
  }
}
